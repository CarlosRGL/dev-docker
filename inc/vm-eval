# commands based on config values
DOCKER_ENV_VARS_CMD_OPTS="env --shell bash $DEVDOCKER_VM"
DOCKER_ENV_VARS="$("$DOCKERMACHINE" $DOCKER_ENV_VARS_CMD_OPTS)"
DOCKERMACHINEIP="$("$DOCKERMACHINE" ip $DEVDOCKER_VM)"
# override SSH_CMD so it connects to VM instead
SSH_CMD="ssh -i $SSH_PRIVKEY -q -p 8022 -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o ControlMaster=yes -A devdocker@$DOCKERMACHINEIP"
SSH_PORT_FW_CMD="$SSH_CMD \
    -L 0.0.0.0:$PORT_20:$DOCKERMACHINEIP:$PORT_20 \
    -L 0.0.0.0:$PORT_21:$DOCKERMACHINEIP:$PORT_21 \
    -L 0.0.0.0:$PORT_7000:$DOCKERMACHINEIP:$PORT_7000 \
    -L 0.0.0.0:$PORT_7001:$DOCKERMACHINEIP:$PORT_7001 \
    -L 0.0.0.0:$PORT_7002:$DOCKERMACHINEIP:$PORT_7002 \
    -L 0.0.0.0:$PORT_7003:$DOCKERMACHINEIP:$PORT_7003 \
    -L 0.0.0.0:$PORT_80:$DOCKERMACHINEIP:$PORT_80 \
    -L 0.0.0.0:$PORT_443:$DOCKERMACHINEIP:$PORT_443 \
    -L 0.0.0.0:$PORT_3306:$DOCKERMACHINEIP:$PORT_3306 \
    -L 0.0.0.0:$PORT_9200:$DOCKERMACHINEIP:$PORT_9200 \
    -L 0.0.0.0:$PORT_9300:$DOCKERMACHINEIP:$PORT_9300 \
    -L 0.0.0.0:$PORT_5601:$DOCKERMACHINEIP:$PORT_5601 \
    -L 127.0.0.2:$PORT_80:$DOCKERMACHINEIP:$PORT_6081 \
    -L 0.0.0.0:$PORT_6081:$DOCKERMACHINEIP:$PORT_6081 \
    -L 0.0.0.0:$PORT_6082:$DOCKERMACHINEIP:$PORT_6082 \
    -L 127.0.0.2:$PORT_6081:$DOCKERMACHINEIP:$PORT_6081 \
    -L 0.0.0.0:$PORT_6379:$DOCKERMACHINEIP:$PORT_6379 \
    -L 0.0.0.0:$PORT_11211:$DOCKERMACHINEIP:$PORT_11211 \
    -N "

# PORTS to be set in start.sh, EXPOSEd in Dockerfile, and FWded in inc/vm-eval
## proftpd
#21 et 7000-7003
## exim4
#25
## apache
#80
#443
## mysql
#3306
## kibana
#5601
## varnish
#6081
#6082
## redis
#6379
## ssh
#8022
## elasticsearch
#9200
#9300
## memcached
#11211
